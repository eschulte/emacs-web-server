<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents the Emacs Web Server (ws)

Copyright (C) 2013 Eric Schulte <schulte.eric@gmail.com>

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with the Invariant Section being "GNU GENERAL PUBLIC LICENSE,"
A copy of the license is included in the section entitled
"GNU Free Documentation License." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Emacs Web Server (ws) User Manual: Requests</title>

<meta name="description" content="Emacs Web Server (ws) User Manual: Requests">
<meta name="keywords" content="Emacs Web Server (ws) User Manual: Requests">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Usage-Examples.html#Usage-Examples" rel="next" title="Usage Examples">
<link href="Handlers.html#Handlers" rel="prev" title="Handlers">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Requests"></a>
<div class="header">
<p>
Next: <a href="Usage-Examples.html#Usage-Examples" accesskey="n" rel="next">Usage Examples</a>, Previous: <a href="Handlers.html#Handlers" accesskey="p" rel="prev">Handlers</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Requests-1"></a>
<h2 class="chapter">3 Requests</h2>
<a name="index-requests"></a>

<p>Each HTTP requests is represented using a <code>ws-request</code> object
(see <a href="Function-Index.html#ws_002drequest">ws-request</a>).  The request object serves two purposes, one
internal and one external.  Internally, request objects are used to
hold state while HTTP headers are parsed incrementally as the HTTP
request text is received from the network.  Externally, request
objects are used to decide which handler to call, and are then passed
as the only argument to the called handler.
</p>
<p>In addition to fields used internally, each <code>ws-request</code> object
holds the network process in the <code>process</code> and holds all HTTP
headers and request GET or POST parameters in the <code>headers</code>
alist.  HTML Headers are keyed using uppercase keywords (e.g.,
<code>:GET</code>), and user supplied parameters are keyed using the string
name of the parameter.
</p>
<p>The <code>process</code> field may be used by handlers to send data to a
client as in the following example.
</p>
<div class="example">
<pre class="example">(process-send-string (process request) &quot;hello world&quot;)
</pre></div>

<p>The <code>headers</code> field may be used to access request information
such as the requested path,
</p>
<div class="example">
<pre class="example">(cdr (assoc :GET (headers request)))
</pre></div>

<p>or named parameters as from a web form.
</p>
<div class="example">
<pre class="example">(cdr (assoc &quot;message&quot; (headers request)))
</pre></div>




</body>
</html>
